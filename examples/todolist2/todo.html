<!DOCTYPE html>
<html>
<head>
	<link href="components.css" rel="stylesheet" type="text/css" />
	<style>
		body {
			font-family: Arial;
		}
	</style>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="../../databind.js"></script>
	<script src="components.js"></script>
	<script>
		//load components
		dataBinder.autoBind = false;
		$("<div/>").load("components.html", function() {
			$(this).children().each(function() {
				var viewName = $(this).data("viewName");
				dataBinder.views[viewName] = {template: this, controller: window[viewName]};
			});
			dataBinder.autoBind = true;
		});
	</script>
	<script>
		items = [];
	</script>
</head>
<body>
	<!--
	This example demonstrates proper component design.  Parent view distributes data to its children, and child views propagates events up the parent chain to be handled.  Files:
		* components.html:  view templates
		* components.js:  controller classes
		* components.css:  styles
	-->
	<div bind-view="TodoList"
		bind-param-items="#items"
		bind-event-add-item="#items.push({text: event.data})"
		bind-event-delete-item="#items.splice(#items.indexOf(event.data), 1)"
		bind-event-set-completed="event.data.item.completed = event.data.completed"
		bind-event-set-text="event.data.item.text = event.data.text">
	</div>
</body>
</html>
