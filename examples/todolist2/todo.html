<!DOCTYPE html>
<html>
<head>
	<link href="components.css" rel="stylesheet" type="text/css" />
	<style>
		body {
			font-family: Arial;
		}
	</style>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://rawgit.com/ken107/kenna-js/master/databind.js"></script>
	<script src="components.js"></script>
	<script>
		//load components
		dataBinder.templateInheritsData = false;
		dataBinder.autoBind = false;
		$("<div/>").load("components.html", function() {
			$(this).children().each(function() {
				var className = this.getAttribute("data-class");
				if (className) {
					this.setAttribute("bind-context", "new " + className + "(thisElem, data)");
					dataBinder.templates[className] = this;
				}
			});
			dataBinder.autoBind = true;
		});
	</script>
	<script>
		items = [];
	</script>
</head>
<body>
	<div bind-template="TodoList"
		bind-param-items="#items"
		bind-event-add-item="#items.push({text: event.data})"
		bind-event-delete-item="#items.splice(#items.indexOf(event.data), 1)"
		bind-event-set-completed="event.data.item.completed = event.data.completed"
		bind-event-set-text="event.data.item.text = event.data.text">
	</div>
</body>
</html>
