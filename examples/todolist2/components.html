<div data-class="Filters"
	bind-param-filters="['All', 'Active', 'Completed']">
	<span class="filter"
		bind-repeater-i="#filters.length"
		bind-statement-1="$(thisElem).toggleClass('active', #currentFilter == #filters[#i])"
		bind-event-click="this.setFilter(#filters[#i])">
		{{#filters[#i]}}
	</span>
</div>

<ul data-class="TodoList"
	bind-param-edit-item="null">
	<li>
		<input type="text" placeholder="What to do?"
			bind-event-keypress="if (event.which == 13) { this.addItem(thisElem.value); thisElem.value = ''; return false; }" />
	</li>
	<li bind-repeater-i="#items.length"
		bind-template="TodoItem"
		bind-param-text="#items[#i].text"
		bind-param-completed="#items[#i].completed"
		bind-param-edit-mode="#items[#i] == #editItem"
		bind-event-start-edit="#editItem = #items[#i]"
		bind-event-stop-edit="#editItem = null"
		bind-event-set-completed="this.setCompleted(#items[#i], event.data)"
		bind-event-delete-item="this.deleteItem(#items[#i])">
	</li>
</ul>

<li data-class="TodoItem">
	<div class="delete-button"
		bind-event-click="this.deleteItem()">X</div>
	<input type="checkbox"
		bind-statement-1="thisElem.checked = #completed"
		bind-event-change="this.setCompleted(thisElem.checked)" />
	<span bind-statement-1="$(thisElem).toggle(!#editMode)"
		bind-statement-2="$(thisElem).css('text-decoration', #completed ? 'line-through' : 'none')"
		bind-event-click="this.startEdit()">
		{{#text}}
	</span>
	<input type="text"
		bind-statement-1="thisElem.value = #text"
		bind-statement-2="$(thisElem).toggle(#editMode); if (#editMode) thisElem.focus()"
		bind-event-keypress="if (event.which == 13) { #text = thisElem.value; this.stopEdit(); return false; }" />
</li>
